{% extends 'base.html.twig' %}

{% block title %}User Page{% endblock %}

{% block body %}
<div class="container py-4">
    <div class="d-flex justify-content-between align-items-center">
        <h2>Личный кабинет</h2>
        <a class="btn btn-outline-secondary" href="{{ path('app_logout') }}">Выйти</a>
    </div>
    <div class="mt-3">
        <p><strong>Клиент:</strong> {{ user.surname }} {{ user.name }} {{ user.patronymic }}</p>
        <p><strong>Телефон:</strong> {{ user.phone }}</p>
        <p><strong>Email:</strong> {{ user.email }}</p>
    </div>
    <hr>
    <h4>Проекты</h4>
    {% if user.projects|length == 0 %}
        <p>Проекты не добавлены.</p>
    {% else %}
        <ul>
        {% for project in user.projects %}
            <li>
                <strong>{{ project.name }}</strong>
                {% if project.description %}<div class="text-muted">{{ project.description }}</div>{% endif %}
            </li>
        {% endfor %}
        </ul>
    {% endif %}

    <hr>
    <h4>Заявки на работу</h4>
    {% if user.workRequests|length == 0 %}
        <p>Заявок нет.</p>
    {% else %}
        <ul>
        {% for wr in user.workRequests %}
            <li>
                <strong>Адрес объекта:</strong> {{ wr.objectAddress }}
                <span class="text-muted">(статус: {{ wr.statusLabel }})</span>
            </li>
        {% endfor %}
        </ul>
    {% endif %}
</div>
{% endblock %}